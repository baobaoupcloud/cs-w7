<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.134.0">
    <meta name="description" content="Baobao">
<meta name="author" content="journeyoftheaverageguy@gmail.com">

    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>Relational Databases :: CS50</title>

    
    <link href="/css/nucleus.css?1728209755" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1728209755" rel="stylesheet">
    <link href="/css/hybrid.css?1728209755" rel="stylesheet">
    <link href="/css/featherlight.min.css?1728209755" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1728209755" rel="stylesheet">
    <link href="/css/auto-complete.css?1728209755" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1728209755" rel="stylesheet">
    <link href="/css/theme.css?1728209755" rel="stylesheet">
    <link href="/css/hugo-theme.css?1728209755" rel="stylesheet">
    
    <link href="/css/theme-workshop.css?1728209755" rel="stylesheet">
    
    

    <script src="/js/jquery-3.3.1.min.js?1728209755"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/2-relational-databases/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="https://baobaoupcloud.github.io/cs-w7/">

<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 30" width="30%"><defs><style>.cls-1{fill:#fff;}.cls-2{fill:#f90;fill-rule:evenodd;}</style></defs><title>AWS-Logo_White-Color</title><path class="cls-1" d="M14.09,10.85a4.7,4.7,0,0,0,.19,1.48,7.73,7.73,0,0,0,.54,1.19.77.77,0,0,1,.12.38.64.64,0,0,1-.32.49l-1,.7a.83.83,0,0,1-.44.15.69.69,0,0,1-.49-.23,3.8,3.8,0,0,1-.6-.77q-.25-.42-.51-1a6.14,6.14,0,0,1-4.89,2.3,4.54,4.54,0,0,1-3.32-1.19,4.27,4.27,0,0,1-1.22-3.2A4.28,4.28,0,0,1,3.61,7.75,6.06,6.06,0,0,1,7.69,6.46a12.47,12.47,0,0,1,1.76.13q.92.13,1.91.36V5.73a3.65,3.65,0,0,0-.79-2.66A3.81,3.81,0,0,0,7.86,2.3a7.71,7.71,0,0,0-1.79.22,12.78,12.78,0,0,0-1.79.57,4.55,4.55,0,0,1-.58.22l-.26,0q-.35,0-.35-.52V2a1.09,1.09,0,0,1,.12-.58,1.2,1.2,0,0,1,.47-.35A10.88,10.88,0,0,1,5.77.32,10.19,10.19,0,0,1,8.36,0a6,6,0,0,1,4.35,1.35,5.49,5.49,0,0,1,1.38,4.09ZM7.34,13.38a5.36,5.36,0,0,0,1.72-.31A3.63,3.63,0,0,0,10.63,12,2.62,2.62,0,0,0,11.19,11a5.63,5.63,0,0,0,.16-1.44v-.7a14.35,14.35,0,0,0-1.53-.28,12.37,12.37,0,0,0-1.56-.1,3.84,3.84,0,0,0-2.47.67A2.34,2.34,0,0,0,5,11a2.35,2.35,0,0,0,.61,1.76A2.4,2.4,0,0,0,7.34,13.38Zm13.35,1.8a1,1,0,0,1-.64-.16,1.3,1.3,0,0,1-.35-.65L15.81,1.51a3,3,0,0,1-.15-.67.36.36,0,0,1,.41-.41H17.7a1,1,0,0,1,.65.16,1.4,1.4,0,0,1,.33.65l2.79,11,2.59-11A1.17,1.17,0,0,1,24.39.6a1.1,1.1,0,0,1,.67-.16H26.4a1.1,1.1,0,0,1,.67.16,1.17,1.17,0,0,1,.32.65L30,12.39,32.88,1.25A1.39,1.39,0,0,1,33.22.6a1,1,0,0,1,.65-.16h1.54a.36.36,0,0,1,.41.41,1.36,1.36,0,0,1,0,.26,3.64,3.64,0,0,1-.12.41l-4,12.86a1.3,1.3,0,0,1-.35.65,1,1,0,0,1-.64.16H29.25a1,1,0,0,1-.67-.17,1.26,1.26,0,0,1-.32-.67L25.67,3.64,23.11,14.34a1.26,1.26,0,0,1-.32.67,1,1,0,0,1-.67.17Zm21.36.44a11.28,11.28,0,0,1-2.56-.29,7.44,7.44,0,0,1-1.92-.67,1,1,0,0,1-.61-.93v-.84q0-.52.38-.52a.9.9,0,0,1,.31.06l.42.17a8.77,8.77,0,0,0,1.83.58,9.78,9.78,0,0,0,2,.2,4.48,4.48,0,0,0,2.43-.55,1.76,1.76,0,0,0,.86-1.57,1.61,1.61,0,0,0-.45-1.16A4.29,4.29,0,0,0,43,9.22l-2.41-.76A5.15,5.15,0,0,1,38,6.78a3.94,3.94,0,0,1-.83-2.41,3.7,3.7,0,0,1,.45-1.85,4.47,4.47,0,0,1,1.19-1.37A5.27,5.27,0,0,1,40.51.29,7.4,7.4,0,0,1,42.6,0a8.87,8.87,0,0,1,1.12.07q.57.07,1.08.19t.95.26a4.27,4.27,0,0,1,.7.29,1.59,1.59,0,0,1,.49.41.94.94,0,0,1,.15.55v.79q0,.52-.38.52a1.76,1.76,0,0,1-.64-.2,7.74,7.74,0,0,0-3.2-.64,4.37,4.37,0,0,0-2.21.47,1.6,1.6,0,0,0-.79,1.48,1.58,1.58,0,0,0,.49,1.18,4.94,4.94,0,0,0,1.83.92L44.55,7a5.08,5.08,0,0,1,2.57,1.6A3.76,3.76,0,0,1,47.9,11a4.21,4.21,0,0,1-.44,1.93,4.4,4.4,0,0,1-1.21,1.47,5.43,5.43,0,0,1-1.85.93A8.25,8.25,0,0,1,42.05,15.62Z"></path><path class="cls-2" d="M45.19,23.81C39.72,27.85,31.78,30,25,30A36.64,36.64,0,0,1,.22,20.57c-.51-.46-.06-1.09.56-.74A49.78,49.78,0,0,0,25.53,26.4,49.23,49.23,0,0,0,44.4,22.53C45.32,22.14,46.1,23.14,45.19,23.81Z"></path><path class="cls-2" d="M47.47,21.21c-.7-.9-4.63-.42-6.39-.21-.53.06-.62-.4-.14-.74,3.13-2.2,8.27-1.57,8.86-.83s-.16,5.89-3.09,8.35c-.45.38-.88.18-.68-.32C46.69,25.8,48.17,22.11,47.47,21.21Z"></path></svg>

</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1728209755"></script>
<script type="text/javascript" src="/js/auto-complete.js?1728209755"></script>
<script type="text/javascript">
    
        var baseurl = "\/\/localhost:1313\/";
    
</script>
<script type="text/javascript" src="/js/search.js?1728209755"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/1-flat-file-databases/" title="Flat-file Databases" class="dd-item 
        
        
        
        ">
      <a href="/1-flat-file-databases/">
           <b> 1. </b> Flat-file Databases
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/2-relational-databases/" title="Relational Databases" class="dd-item 
        
        active
        
        ">
      <a href="/2-relational-databases/">
           <b> 2. </b> Relational Databases
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/3-sql-in-python/" title="SQL in Python" class="dd-item 
        
        
        
        ">
      <a href="/3-sql-in-python/">
           <b> 3. </b> SQL in Python
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/4-injection-attacks/" title="Injection Attacks" class="dd-item 
        
        
        
        ">
      <a href="/4-injection-attacks/">
           <b> 4. </b> Injection Attacks
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://www.facebook.com/groups/awsstudygroupfcj/"><i class='fab fa-facebook'></i> AWS Study Group</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      
        <li>
          <a class="padding">
            <i class="fas fa-language fa-fw"></i>
          <div class="select-style">
            <select id="select-language" onchange="location = this.value;">
          
          
          
              
              
                  
                    
                    
                      <option id="en" value="//localhost:1313/2-relational-databases/" selected>English</option>
                    
                  
              
                  
              
          
              
              
                  
              
                  
                    
                    
                      <option id="vi" value="//localhost:1313/vi/2-relational-databases/">Tiếng Việt</option>
                    
                  
              
          
        </select>
        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          width="255px" height="255px" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255;" xml:space="preserve">
          <g>
            <g id="arrow-drop-down">
              <polygon points="0,63.75 127.5,191.25 255,63.75 		" />
            </g>
          </g>
        </svg>
        </div>
        </a>
        </li>
      
      
      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> Clear History</a></li>
      
      </ul>
    </section>
    
    <section id="footer">
      <left>
    
     <b> Workshop</b> <br>
    <img src="https://hitwebcounter.com/counter/counter.php?page=7920860&style=0038&nbdigits=9&type=page&initCount=0" title="Migrate" Alt="web counter"   border="0" /></a>  <br>
     <b> <a href="https://cloudjourney.awsstudygroup.com/">Cloud Journey</a></b> <br>
    <img src="https://hitwebcounter.com/counter/counter.php?page=7830807&style=0038&nbdigits=9&type=page&initCount=0" title="Total CLoud Journey" Alt="web counter"   border="0"   />
     
</left>
<left>
    <br>
    <br>
        <b> Last Updated </b> <br>
        <i><font color=orange>06-10-2024</font></i>
    </left>
    <left>
        <br>
        <br>
            <b> Team </b> <br>
           
            <i> <a href="https://www.linkedin.com/in/phan-kim-bao/"  style="color:orange">Phan Kim Bảo  </a> <br>

               
        </i>
        </left>

<script async defer src="https://buttons.github.io/buttons.js"></script>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                  
                  
                  
                  <div id="top-github-link">
                    <a class="github-link" title='Edit this page' href="https://baobaoupcloud.github.io/cs/2-Relational-Databases/_index.md" target="blank">
                      <i class="fas fa-code-branch"></i>
                      <span id="top-github-link-text">Edit this page</span>
                    </a>
                  </div>
                  
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            <a href='/'>CS50 Week 7</a> > Relational Databases
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#common-commands">Common Commands</a></li>
        <li><a href="#example">Example</a></li>
        <li><a href="#joins">JOINs</a></li>
        <li><a href="#indexes">Indexes</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Relational Databases
            </h1>
          

        



	<p>Google, Twitter, and Meta all use relational databases to store their information at scale.
Relational databases store data in rows and columns in structures called tables.
SQL allows for four types of commands:</p>
<ul>
<li>Create</li>
<li>Read</li>
<li>Update</li>
<li>Delete</li>
</ul>
<p>These four operations are affectionately called <code>CRUD</code>.
We can create a SQL database at the terminal by typing <code>sqlite3 favorites.db</code>. Upon being prompted, we will agree that we want to create <code>favorites.db</code> by pressing <code>y</code>.</p>
<p>You will notice a different prompt as we are now inside a program called <code>sqlite3</code>.</p>
<p>We can put <code>sqlite3</code> into csv mode by typing</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>.mode csv
</span></span></code></pre></div><p>Then, we can import our data from our csv file by typing</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>.import favorites.csv favorites
</span></span></code></pre></div><p>It seems that nothing has happened but we successfully imported our data.</p>
<p>To see the structure of the database, we can type</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>.schema
</span></span></code></pre></div><p>We can read items from a table using the syntax</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> columns <span style="color:#66d9ef">FROM</span> <span style="color:#66d9ef">table</span>
</span></span></code></pre></div><p>For example, we can iterate every row in favorites</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> favorites;
</span></span></code></pre></div><p>We can get a subset of the data using the command</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">language</span> <span style="color:#66d9ef">FROM</span> favorites;
</span></span></code></pre></div><h3 id="common-commands">Common Commands</h3>
<p>SQL supports many commands to access data, including:</p>
<ul>
<li><code>AVG</code></li>
<li><code>COUNT</code></li>
<li><code>DISTINCT</code></li>
<li><code>LOWER</code></li>
<li><code>MAX</code></li>
<li><code>MIN</code></li>
<li><code>UPPER</code></li>
</ul>
<p>For example, you can count all rows of favorites by typing</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">COUNT</span>(<span style="color:#66d9ef">language</span>) <span style="color:#66d9ef">FROM</span> favorites;
</span></span></code></pre></div><p>Further, you can type to get a list of the individual languages within the database, type</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">DISTINCT</span>(<span style="color:#66d9ef">language</span>) <span style="color:#66d9ef">FROM</span> favorites;
</span></span></code></pre></div><p>You could even get a distinct count of those:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">COUNT</span>(<span style="color:#66d9ef">DISTINCT</span>(<span style="color:#66d9ef">language</span>)) <span style="color:#66d9ef">FROM</span> favorites;
</span></span></code></pre></div><p>SQL offers additional commands we can utilize in our queries:</p>
<ul>
<li><code>WHERE</code>       &ndash; adding a Boolean expression to filter our data</li>
<li><code>LIKE</code>        &ndash; filtering responses more loosely</li>
<li><code>ORDER BY</code>    &ndash; ordering responses</li>
<li><code>LIMIT</code>       &ndash; limiting the number of responses</li>
<li><code>GROUP BY</code>    &ndash; grouping responses together</li>
</ul>
<p>Notice that we use <code>--</code> to write a comment in SQL.
For example, we can execute</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">COUNT</span>(<span style="color:#f92672">*</span>) <span style="color:#66d9ef">FROM</span> favorites <span style="color:#66d9ef">WHERE</span> <span style="color:#66d9ef">language</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;C&#39;</span>;
</span></span></code></pre></div><p>A count is presented.</p>
<p>Further, we could type</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">COUNT</span>(<span style="color:#f92672">*</span>) <span style="color:#66d9ef">FROM</span> favorites <span style="color:#66d9ef">WHERE</span> <span style="color:#66d9ef">language</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;C&#39;</span> <span style="color:#66d9ef">AND</span> problem <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Hello, World;
</span></span></span></code></pre></div><p>Notice how the <code>AND</code> is utilized to narrow our results.</p>
<p>Similarly, we could execute</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">language</span>, <span style="color:#66d9ef">COUNT</span>(<span style="color:#f92672">*</span>) <span style="color:#66d9ef">FROM</span> favorites <span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> <span style="color:#66d9ef">language</span>;
</span></span></code></pre></div><p>This would offer a temporary table that would show the language and count.</p>
<p>We could improve this by typing</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">language</span>, <span style="color:#66d9ef">COUNT</span>(<span style="color:#f92672">*</span>) <span style="color:#66d9ef">FROM</span> favorites <span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> <span style="color:#66d9ef">language</span> <span style="color:#66d9ef">ORDER</span> <span style="color:#66d9ef">BY</span> <span style="color:#66d9ef">COUNT</span>(<span style="color:#f92672">*</span>);
</span></span></code></pre></div><p>This will order the resulting table by the count.
We can also <code>INSERT</code> into a SQL database utilizing the form</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> <span style="color:#66d9ef">table</span> (<span style="color:#66d9ef">column</span>...) <span style="color:#66d9ef">VALUES</span>(value, ...);
</span></span></code></pre></div><p>We can execute</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> favorites (<span style="color:#66d9ef">language</span>, problem) <span style="color:#66d9ef">VALUES</span> (<span style="color:#e6db74">&#39;SQL&#39;</span>, <span style="color:#e6db74">&#39;Fiftyville&#39;</span>);
</span></span></code></pre></div><p><code>DELETE</code> allows you to delete parts of your data. For example, you could:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">DELETE</span> <span style="color:#66d9ef">FROM</span> favorites <span style="color:#66d9ef">WHERE</span> <span style="color:#66d9ef">Timestamp</span> <span style="color:#66d9ef">IS</span> <span style="color:#66d9ef">NULL</span>;
</span></span></code></pre></div><p>We can also utilize the <code>UPDATE</code> command to update your data.</p>
<p>For example, you can execute</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">UPDATE</span> favorites <span style="color:#66d9ef">SET</span> <span style="color:#66d9ef">language</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;SQL&#39;</span>, problem <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Fiftyville&#39;</span>;
</span></span></code></pre></div><p>This will result in overwriting all previous statements where C was the favorite programming language.</p>
<p>Notice that these queries have immense power. Accordingly, in the real-world setting, you should consider who has permissions to execute certain commands.</p>
<h3 id="example">Example</h3>
<p>We can imagine a database that we might want to create to catalog various TV shows. We could create a spreadsheet with columns like <code>title</code>, <code>star</code>, <code>star</code>, and more stars. A problem with this approach is this approach has a lot of wasted space. Some shows may have one star. Others may have dozens.</p>
<p>We could separate our database into multiple sheets. We could have a shows sheet and a people sheet. On the people sheet, each person could have a unique id. On the shows sheet, each show could have a unique id too. On a third sheet called stars we could relate how each show has people for each show by having a show_id and person_id. While this is an improvement, this is not an ideal database.</p>
<p>IMDb offers a database of people, shows, writers, stars, genres, and ratings. Each of these tables is related to one another as follows:</p>
<p><img alt="shows" src="https://raw.githubusercontent.com/baobaoupcloud/cs-w7/main/static/images/2.relationaldatabase/relationaldatabase1.png"></p>
<p>After downloading <a href="https://github.com/cs50/lectures/blob/2022/fall/7/src7/imdb/shows.db">shows.db</a>, you can execute <code>sqlite3 shows.db</code> in your terminal window.</p>
<p>Let’s zero in on the relationship between two tables within the database called shows and ratings. The relationship between these two tables can be illustrated as follows:</p>
<p><img alt="shows" src="https://raw.githubusercontent.com/baobaoupcloud/cs-w7/main/static/images/2.relationaldatabase/relationaldatabase2.png"></p>
<p>To illustrate the relationship between these tables, we could execute the following command: <code>SELECT * FROM ratings LIMIT 10;</code>. Examining the output, we could execute <code>SELECT * FROM shows LIMIT 10;</code>.</p>
<p>To understand the database, upon executing <code>.schema</code> you will find not only each of the tables but the individual fields inside each of these fields.</p>
<p>As you can see, shows has an id field. The genres table has a <code>show_id</code> field which has data that is common between it and the shows table.</p>
<p>Further, <code>show_id</code> exists in all of the tables. In the shows table, it is simply called <code>id</code>. This common field between all the fields is called a key. <strong>Primary keys</strong> are used to identify a unique record in a table. <strong>Foreign keys</strong> are used to build relationships between tables by pointing to the primary key in another table.</p>
<p>By storing data in a relational database, as above, data can be more efficiently stored.</p>
<p>In sqlite, we have five datatypes, including:</p>
<ul>
<li><code>BLOB</code>       &ndash; binary large objects that are groups of ones and zeros</li>
<li><code>INTEGER</code>    &ndash; an integer</li>
<li><code>NUMERIC</code>    &ndash; for numbers that are formatted specially like dates</li>
<li><code>REAL</code>       &ndash; like a float</li>
<li><code>TEXT</code>       &ndash; for strings and the like</li>
</ul>
<p>Additionally, columns can be set to add special constraints: <code>NOT NULL</code>, <code>UNIQUE</code></p>
<p>We could execute</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> stars <span style="color:#66d9ef">LIMIT</span> <span style="color:#ae81ff">10</span>;
</span></span></code></pre></div><p><code>show_id</code> is a foreign key in this final query because <code>show_id</code> corresponds to the unique id field in shows. <code>person_id</code> corresponds to the unique id field in the people column.</p>
<p>We can further play with this data to understand these relationships. Execute</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> ratings;
</span></span></code></pre></div><p>There are a lot of ratings!</p>
<p>We can further limit this data down by executing</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> show_id <span style="color:#66d9ef">FROM</span> ratings <span style="color:#66d9ef">WHERE</span> rating <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">6</span>.<span style="color:#ae81ff">0</span> <span style="color:#66d9ef">LIMIT</span> <span style="color:#ae81ff">10</span>;
</span></span></code></pre></div><p>From this query, you can see that there are 10 shows presented. However, we don’t know what show each <code>show_id</code> represents.</p>
<p>You can discover what shows these are by executing</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> shows <span style="color:#66d9ef">WHERE</span> id <span style="color:#f92672">=</span> <span style="color:#ae81ff">626124</span>;
</span></span></code></pre></div><p>We can further our query to be more efficient by executing:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> title
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> shows
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> id <span style="color:#66d9ef">IN</span> (
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">SELECT</span> show_id
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">FROM</span> ratings
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">WHERE</span> rating <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">6</span>.<span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">LIMIT</span> <span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span>)
</span></span></code></pre></div><p>Notice that this query nests together two queries. An inner query is used by an outer query.</p>
<h3 id="joins">JOINs</h3>
<p>We are pulling data from shows and ratings.
How could we combine tables temporarily? Tables could be joined together using the <code>JOIN</code> command.
Execute the following command:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> shows
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">JOIN</span> ratings <span style="color:#66d9ef">on</span> shows.id <span style="color:#f92672">=</span> ratings.show_id
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">WHERE</span> rating <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">6</span>.<span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">LIMIT</span> <span style="color:#ae81ff">10</span>;
</span></span></code></pre></div><p>Notice this results in a wider table than we have previously seen.
Where the previous queries have illustrated the one-to-one relationship between these keys, let’s examine some one-to-many relationships. Focusing on the genres table, execute the following:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> genres
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">LIMIT</span> <span style="color:#ae81ff">10</span>;
</span></span></code></pre></div><p>Notice how this provides us a sense of the raw data. You might notice that one shows have three values. This is a one-to-many relationship.</p>
<p>We can learn more about the genres table by typing <code>.schema genres</code>.
Execute the following command to learn more about the various comedies in the database:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> title <span style="color:#66d9ef">FROM</span> shows
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> id <span style="color:#66d9ef">IN</span> (
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">SELECT</span> show_id <span style="color:#66d9ef">FROM</span> genres
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">WHERE</span> genre <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Comedy&#39;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">LIMIT</span> <span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></div><p>Notice how this produces a list of comedies, including Catweazle.</p>
<p>To learn more about Catweazle, by joining various tables through a join:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> shows
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">JOIN</span> genres
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">ON</span> shows.id <span style="color:#f92672">=</span> genres.show_id
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> id <span style="color:#f92672">=</span> <span style="color:#ae81ff">63881</span>;
</span></span></code></pre></div><p>Notice that this results in a temporary table. It is fine to have duplicate table.</p>
<p>A final relationship is a many-to-many relationship.
We can learn more about the show The Office by executing the following command:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> person_id <span style="color:#66d9ef">FROM</span> stars
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> show_id <span style="color:#f92672">=</span> (
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">SELECT</span> id <span style="color:#66d9ef">FROM</span> shows
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">WHERE</span> title <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;The Office&#39;</span> <span style="color:#66d9ef">AND</span> <span style="color:#66d9ef">year</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">2005</span>
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></div><p>Notice that this results in a table that includes the person_ids of various stars.
I could learn more about this group of actors by executing the following:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> name <span style="color:#66d9ef">FROM</span> people
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> id <span style="color:#66d9ef">IN</span> (
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">SELECT</span> person_id <span style="color:#66d9ef">FROM</span> stars
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">WHERE</span> show_id <span style="color:#f92672">=</span> (
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">SELECT</span> id <span style="color:#66d9ef">FROM</span> shows
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">WHERE</span> title <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;The Office&#39;</span> <span style="color:#66d9ef">AND</span> <span style="color:#66d9ef">year</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">2005</span>
</span></span><span style="display:flex;"><span>    )
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></div><p>This results in a top-billed stars.
We can further understand this data by executing:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> title <span style="color:#66d9ef">from</span> shows
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> id <span style="color:#66d9ef">IN</span> (
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">SELECT</span> show_id <span style="color:#66d9ef">FROM</span> stars
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">WHERE</span> person_id <span style="color:#f92672">=</span> (
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">SELECT</span> id <span style="color:#66d9ef">FROM</span> people
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">WHERE</span> name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Steve Carell&#39;</span>
</span></span><span style="display:flex;"><span>  )
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></div><p>This results in a list of titles of shows wherein Steve Carell stared.</p>
<p>The wildcard <code>%</code> operator can be used to find all people whose names start with Steve C one could employ the syntax</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> people <span style="color:#66d9ef">WHERE</span> name <span style="color:#66d9ef">LIKE</span> <span style="color:#e6db74">&#39;Steve C%&#39;</span>;
</span></span></code></pre></div><h3 id="indexes">Indexes</h3>
<p>While relational databases have the ability to be more fast and more robust than utilizing a CSV file, data can be optimized within a table using indexes.</p>
<p>Indexes can be utilized to speed up our queries.
We can track the speed of our queries by executing <code>.timer on</code> in sqlite3.
To understand how indexes can speed up our queries, run the following:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> shows <span style="color:#66d9ef">WHERE</span> title <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;The Office&#39;</span>;
</span></span></code></pre></div><p>Notice the time that displays after the query executes.
Then, we can create an index with the syntax</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">INDEX</span> title_index <span style="color:#66d9ef">on</span> shows (title);
</span></span></code></pre></div><p>This tells sqlite3 to create an index and perform some special under-the-hood optimization relating to this column title.</p>
<p>This will create a data structure called a B Tree, a data structure that looks similar to a binary tree. However, unlike a binary tree, there can be more than two child notes.</p>
<p>Running the query</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> shows <span style="color:#66d9ef">WHERE</span> title <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;The Office&#39;</span>;
</span></span></code></pre></div><p>You will notice that the query runs much more quickly!</p>
<p>Unfortunately, indexing all columns would result in utilizing more storage space. Therefore, there is a tradeoff for enhanced speed.</p>





<footer class=" footline" >
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/1-flat-file-databases/" title="Flat-file Databases"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/3-sql-in-python/" title="SQL in Python" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1728209755"></script>
    <script src="/js/perfect-scrollbar.min.js?1728209755"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1728209755"></script>
    <script src="/js/jquery.sticky.js?1728209755"></script>
    <script src="/js/featherlight.min.js?1728209755"></script>
    <script src="/js/highlight.pack.js?1728209755"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1728209755"></script>
    <script src="/js/learn.js?1728209755"></script>
    <script src="/js/hugo-learn.js?1728209755"></script>

    <link href="/mermaid/mermaid.css?1728209755" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1728209755"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-158079754-2', 'auto');
  ga('send', 'pageview');

</script>
  </body>
</html>
